<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/904b44903331b11d.css" data-precedence="next"/><title>Apple Notes to Markdown</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="authorization_endpoint" href="https://indieauth.com/auth"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><article><div># Apple Notes to Markdown

#TechnicalDesign #POSSE #IndieWeb

## Context

The Notes app is ubiquitous on Apple devices and it has many things
going for it: built in cloud synchronization; easy collaboration;
integrates well with Shortcuts and Safari. It brings one major
limitation that many in the technology community consider a dealbreaker:
it's locked in. Apple Notes does not support file-based access and it
offers no simple methods of exposing notes publicly on the Web.

## Objective

Design an automated system that exports Notes as Markdown once a day,
without availability guarantees but easy to backfill.

## Tenants

1.  Keep it simple with on-device MacOS tools\
    There's no need to invest in operational excellence given the
    relaxed availability goals. Apple Notes does not provide any other
    public APIs and unofficial tools bring security concerns.

## Considerations

### \[1\] Pure Shortcuts

1.  Portable to any device with Shortcuts
2.  Easier to share and onboard with wider audience

### \[2\] Shell Script + 3rd party tools

1.  **Faster to compose, maintain and expand**
2.  Native automation mechanism (cron) on MacOS
3.  Easier to collaborate and attract contributions
4.  **Richer ecosystem of tools**

A pure Shortcuts solution would be an interesting achievement and
positively impact more people, but a pragmatic analysis heavily favours
using tooling that is both more capable and easier to compose - for
someone who already knows shell scripting.

## Challenges

### \[1\] Native Shortcuts export of Notes to RTF or Markdown is lossy

Exporting Notes to RTF or Markdown does not preserve structural
information regarding titles, headers and sub-headers. The most
information-complete format to export is HTML, which translates the
whole document using p tags but at least marks titles and headers with
specific CSS classes. Subheaders are indistinguishable from[Â 
]{.Apple-converted-space}paragraphs in bold.

## Implementation

### Cron

0 \* \* \* \* notes2md \>/tmp/stdout.log 2\>/tmp/stderr.log

### Script

<https://github.com/villasv/villasv.github.io/blob/main/scripts/notes2md>
</div></article><script src="/_next/static/chunks/webpack-85efd10cfa69e1d2.js" async=""></script><script src="/_next/static/chunks/bce60fc1-5dbc0e295fd1bc4d.js" async=""></script><script src="/_next/static/chunks/769-16d875f4ebf59767.js" async=""></script><script src="/_next/static/chunks/main-app-a65c0f2b7caef498.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/904b44903331b11d.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:I{\"id\":\"8802\",\"chunks\":[\"272:static/chunks/webpack-85efd10cfa69e1d2.js\",\"253:static/chunks/bce60fc1-5dbc0e295fd1bc4d.js\",\"769:static/chunks/769-16d875f4ebf59767.js\"],\"name\":\"\",\"async\":false}\n5:I{\"id\":\"4299\",\"chunks\":[\"272:static/chunks/webpack-85efd10cfa69e1d2.js\",\"253:static/chunks/bce60fc1-5dbc0e295fd1bc4d.js\",\"769:static/chunks/769-16d875f4ebf59767.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"3211\",\"chunks\":[\"272:static/chunks/webpack-85efd10cfa69e1d2.js\",\"253:static/chunks/bce60fc1-5dbc0e295fd1bc4d.js\",\"76"])</script><script>self.__next_f.push([1,"9:static/chunks/769-16d875f4ebf59767.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":\"5767\",\"chunks\":[\"272:static/chunks/webpack-85efd10cfa69e1d2.js\",\"253:static/chunks/bce60fc1-5dbc0e295fd1bc4d.js\",\"769:static/chunks/769-16d875f4ebf59767.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/904b44903331b11d.css\",\"precedence\":\"next\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"yM6J6Tz0-Ek3Rpz0Mr36o\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/notes/apple-notes-to-markdown\",\"initialTree\":[\"\",{\"children\":[\"notes\",{\"children\":[[\"slug\",\"apple-notes-to-markdown\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"apple-notes-to-markdown\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L4\",null],\"globalErrorComponent\":\"$5\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"link\",null,{\"rel\":\"authorization_endpoint\",\"href\":\"https://indieauth.com/auth\"}]}],[\"$\",\"body\",null,{\"children\":[\"$L6\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"link\",null,{\"rel\":\"authorization_endpoint\",\"href\":\"https://indieauth.com/auth\"}]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"notes\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"notes\",\"children\",[\"slug\",\"apple-notes-to-markdown\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L9\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"apple-notes-to-markdown\\\"}\"},\"styles\":[]}],\"segment\":[\"slug\",\"apple-notes-to-markdown\",\"d\"]},\"styles\":[]}],\"segment\":\"notes\"},\"styles\":[]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"# Apple Notes to Markdown\\n\\n#TechnicalDesign #POSSE #IndieWeb\\n\\n## Context\\n\\nThe Notes app is ubiquitous on Apple devices and it has many things\\ngoing for it: built in cloud synchronization; easy collaboration;\\nintegrates well with Shortcuts and Safari. It brings one major\\nlimitation that many in the technology community consider a dealbreaker:\\nit's locked in. Apple Notes does not support file-based access and it\\noffers no simple methods of exposing notes publicly on the Web.\\n\\n## Objective\\n\\nDesign an automated system that exports Notes as Markdown once a day,\\nwithout availability guarantees but easy to backfill.\\n\\n## Tenants\\n\\n1.  Keep it simple with on-device MacOS tools\\\\\\n    There's no need to invest in operational excellence given the\\n    relaxed availability goals. Apple Notes does not provide any other\\n    public APIs and unofficial tools bring security concerns.\\n\\n## Considerations\\n\\n### \\\\[1\\\\] Pure Shortcuts\\n\\n1.  Portable to any device with Shortcuts\\n2.  Easier to share and onboard with wider audience\\n\\n### \\\\[2\\\\] Shell Script + 3rd party tools\\n\\n1.  **Faster to compose, maintain and expand**\\n2.  Native automation mechanism (cron) on MacOS\\n3.  Easier to collaborate and attract contributions\\n4.  **Richer ecosystem of tools**\\n\\nA pure Shortcuts solution would be an interesting achievement and\\npositively impact more people, but a pragmatic analysis heavily favours\\nusing tooling that is both more capable and easier to compose - for\\nsomeone who already knows shell scripting.\\n\\n## Challenges\\n\\n### \\\\[1\\\\] Native Shortcuts export of Notes to RTF or Markdown is lossy\\n\\nExporting Notes to RTF or Markdown does not preserve structural\\ninformation regarding titles, headers and sub-headers. The most\\ninformation-complete format to export is HTML, which translates the\\nwhole document using p tags but at least marks titles and headers with\\nspecific CSS classes. Subheaders are indistinguishable from[Â \\n]{.Apple-converted-space}paragraphs in bold.\\n\\n## Implementation\\n\\n### Cron\\n\\n0 \\\\* \\\\* \\\\* \\\\* notes2md \\\\\u003e/tmp/stdout.log 2\\\\\u003e/tmp/stderr.log\\n\\n### Script\\n\\n\u003chttps://github.com/villasv/villasv.github.io/blob/main/scripts/notes2md\u003e\\n\"}}]}]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n4:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Apple Notes to Markdown\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script></body></html>